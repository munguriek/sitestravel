{% extends 'base.html' %} 
{% load static %} 
{% load crispy_forms_tags %}
{% block content %}

<!-- hs Navigation End -->
<!-- btc tittle Wrapper Start -->
<div class="btc_tittle_main_wrapper">
	<div class="btc_tittle_img_overlay"></div>
	<div class="container">
		<div class="row">
			<div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12 full_width">
				<div class="btc_tittle_left_heading">
					<h1>Cars</h1>
				</div>
			</div>
			<div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12 full_width">
				<div class="btc_tittle_right_heading">
					<div class="btc_tittle_right_cont_wrapper">
						<ul>
							<li>
								<a href="{% url 'index' %}">Home</a>
								<i class="fa fa-angle-right"></i>
							</li>
							<li>Packages</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- btc tittle Wrapper End -->


<!-- cars Start -->
<div class="x_blog_sidebar_main_wrapper float_left padding_tb_100">
	<div class="container">
		<div class="row">
			<!-- sidebar -->
			{% include 'includes/sidebar.html' %}
			<div class="col-xl-9 col-lg-8 col-md-12 col-sm-12 col-12">
				<div class="x_carbooking_right_section_wrapper float_left">
					<div class="row">
						<div class="col-12 col-md-8 offset-md-3">
							<p class="text-center">
								{% include 'includes/messages.html' %}
							</p>
						</div>
						<div class="x_services_title_main_wrapper float_left padding_tb_10">
							<div class="container">
								<div class="row">
									<div class="col-md-12">
										<div class="x_offer_car_heading_wrapper x_offer_car_tb_heading_wrapper float_left">
											<h4>All Cars</h4>
											<h3>Cars</h3>
											<!-- <p>Dashboard and Management console for Site Travel website</p> -->
										</div>
									</div>
									<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 full_width">
									<!-- modal start-->
									
									{% if request.user.is_staff %}
									<button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#exampleModal">
										Add car
									</button>
									{% endif %}
									<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
										<div class="modal-dialog modal-dialog-centered modal-lg">
										<div class="modal-content">
											<div class="modal-header">
											<h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
											<button type="button" class="close" data-dismiss="modal" aria-label="Close">
												<span aria-hidden="true">&times;</span>
											</button>
											</div>
											<div class="modal-body">
												<form method="post" enctype='multipart/form-data'>
													{% csrf_token %}
													{{ car_form |crispy }}
													<div class="float-right">
														<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
														<button type="submit" class="btn btn-success">Save</button>
													</div>
												</form>
											</div>
										</div>
										</div>
									</div>
									<table id="myTable" class="table table-bordered table-hover table-striped table-responsive">
										<thead>
											<tr>
												<th>Category</th>
												<th >Car</th>
												<th>Capacity</th>
												<th>Availability</th>
												<th>Options</th>
											</tr>
										</thead>
										<tbody>
											{% for car  in cars  %}
											<tr>
												<td>{{car.category}}</td>
												<td>{{car.car |title }}</td>
												<th>{{car.capacity}}</th>
												<td>
													{% if request.user.is_staff %}
														{% if car.available == True %}
														<a href="{% url 'car_availability' car.id %}" class="btn btn-outline-danger btn-sm">Remove availability</a>
														{% else %}
														<a href="{% url 'car_availability' car.id %}" class="btn btn-outline-success btn-sm">Make available</a>
														{% endif %}
													{% else %}
														{% if car.available == True %}
														Available
														{% else %}
														Not available
														{% endif %}
													{% endif %}
												</td>
												<td>
													<a href="{% url 'car' car.id %}" class="btn btn-outline-primary btn-sm">view</a>
												</td>
											</tr>
											{% endfor %}
										</tbody>
										</table>
									</div>
									
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- CArs End -->

{% endblock %}